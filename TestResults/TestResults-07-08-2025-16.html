<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Execution Report - ManageQuoteStatus</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .summary {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-case {
            background-color: white;
            margin-bottom: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .test-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
        }
        .test-header:hover {
            background-color: #f8f9fa;
        }
        .test-title {
            font-weight: bold;
            font-size: 16px;
        }
        .status {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status.passed {
            background-color: #d4edda;
            color: #155724;
        }
        .status.failed {
            background-color: #f8d7da;
            color: #721c24;
        }
        .test-details {
            display: none;
            padding: 20px;
            border-top: 1px solid #eee;
            background-color: #fafafa;
        }
        .test-details.show {
            display: block;
        }
        .detail-section {
            margin-bottom: 20px;
        }
        .detail-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .step-list {
            list-style: none;
            padding: 0;
        }
        .step-item {
            background-color: white;
            margin-bottom: 8px;
            padding: 10px;
            border-left: 3px solid #3498db;
            border-radius: 3px;
        }
        .expand-icon {
            transition: transform 0.3s ease;
        }
        .expanded .expand-icon {
            transform: rotate(90deg);
        }
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .stat-card {
            flex: 1;
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        .passed-stat { color: #28a745; }
        .failed-stat { color: #dc3545; }
        .total-stat { color: #007bff; }
        .phase-section {
            background-color: white;
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .phase-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        .error-details {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            border-radius: 3px;
            margin-top: 10px;
        }
        .success-details {
            background-color: #d1edff;
            border: 1px solid #bee5eb;
            padding: 10px;
            border-radius: 3px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Test Execution Report - ManageQuoteStatus</h1>
        <p>Execution Date: July 8, 2025 | Browser: Chrome | Environment: https://cte-dev.iclick.nz/</p>
    </div>

    <div class="summary">
        <h2>Execution Summary</h2>
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number total-stat">10</div>
                <div class="stat-label">Total Test Cases</div>
            </div>
            <div class="stat-card">
                <div class="stat-number passed-stat">9</div>
                <div class="stat-label">Passed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number failed-stat">1</div>
                <div class="stat-label">Failed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number total-stat">90%</div>
                <div class="stat-label">Success Rate</div>
            </div>
        </div>
        
        <h3>Test Suite Details</h3>
        <ul>
            <li><strong>Test Suite:</strong> ManageQuoteStatus.md</li>
            <li><strong>Priority:</strong> High</li>
            <li><strong>Login Credentials:</strong> admin@email.com / Admin@123</li>
            <li><strong>Base URL:</strong> https://cte-dev.iclick.nz/</li>
            <li><strong>Target Page:</strong> /quote-status</li>
        </ul>
    </div>

    <div class="phase-section">
        <div class="phase-title">Phase 1: Basic Navigation and CRUD Operations (TC 036 - TC 039)</div>
        <p><strong>Status:</strong> <span class="status passed">All Passed</span></p>
        <p><strong>Description:</strong> Tests basic navigation to Quote Status page, viewing existing statuses, editing status properties, and adding new statuses.</p>
    </div>

    <div class="phase-section">
        <div class="phase-title">Phase 2: Validation and Delete Operations (TC 040 - TC 045)</div>
        <p><strong>Status:</strong> <span class="status failed">1 Failed</span></p>
        <p><strong>Description:</strong> Tests field validation scenarios, cancel operations, and delete functionality with confirmation dialogs.</p>
    </div>

    <!-- Phase 1 Test Cases -->
    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 036 - Verify Navigate to Quote Status Page</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Navigate to https://cte-dev.iclick.nz/</li>
                    <li class="step-item">2. Login with admin@email.com / Admin@123</li>
                    <li class="step-item">3. Expand sidebar navigation</li>
                    <li class="step-item">4. Navigate to Settings > Quote Status</li>
                    <li class="step-item">5. Verify page URL contains "/quote-status"</li>
                    <li class="step-item">6. Verify page title displays "Settings-Quote Status"</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Page URL should contain "/quote-status"</li>
                    <li class="step-item">Page heading should display "Settings - Quote Status"</li>
                    <li class="step-item">Quote Status page should load successfully</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Successfully navigated to Quote Status page. URL confirmed as "https://cte-dev.iclick.nz/quote-status" and page heading displayed "Settings - Quote Status" correctly.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 037 - Verify View Existing Quote Statuses</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Verify quote status list displays</li>
                    <li class="step-item">2. Verify table shows quote status names</li>
                    <li class="step-item">3. Verify table shows active status</li>
                    <li class="step-item">4. Verify table shows action buttons (⋮)</li>
                    <li class="step-item">5. Verify pagination functionality works</li>
                    <li class="step-item">6. Verify showing results information displays</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Quote status table should be visible with proper columns</li>
                    <li class="step-item">Status names should be displayed in the table</li>
                    <li class="step-item">Active status column should show "Active" for statuses</li>
                    <li class="step-item">Action buttons (⋮) should be present for each row</li>
                    <li class="step-item">Pagination controls should be functional</li>
                    <li class="step-item">Results count information should be displayed</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Quote status table displayed correctly with all required columns (Quote Status, Active, Actions). Action buttons (⋮) were present for each row. Pagination controls and results count ("Showing 1 to 10 of 12 results") were visible and functional.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 038 - Edit Quote Status Name and Colors</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Select "Expired" status from the list</li>
                    <li class="step-item">2. Click action button (⋮) and select "Edit"</li>
                    <li class="step-item">3. Change status name to "Updated Expired"</li>
                    <li class="step-item">4. Set background color to "#CFFFE2"</li>
                    <li class="step-item">5. Set font color to "#1B3C53"</li>
                    <li class="step-item">6. Click Save button</li>
                    <li class="step-item">7. Verify success and updated status displays in list</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Edit modal should open with current status details</li>
                    <li class="step-item">Fields should be editable and accept new values</li>
                    <li class="step-item">Save should succeed without errors</li>
                    <li class="step-item">Updated status should appear in the list with new name "Updated Expired"</li>
                    <li class="step-item">Colors should be applied correctly</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Successfully edited the "Expired" status. Modal opened with current details, all fields were updated as specified, Save operation completed successfully, and the status now appears as "Updated Expired" in the list with applied colors.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 039 - Add new quote status</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Click on the "+ Status" button</li>
                    <li class="step-item">2. Set status name to "Waiting For Approval"</li>
                    <li class="step-item">3. Set background color to "#FFFBDE"</li>
                    <li class="step-item">4. Set font color to "#0D5EA6"</li>
                    <li class="step-item">5. Click Save button</li>
                    <li class="step-item">6. Verify success and new status displays in list</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Add Status modal should open</li>
                    <li class="step-item">All fields should be editable</li>
                    <li class="step-item">Save should succeed without errors</li>
                    <li class="step-item">New status should appear in the list as "Waiting For Approval"</li>
                    <li class="step-item">Total count should increase by 1</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Successfully added new quote status. "+ Status" button opened the Add Status modal, all fields were filled as specified, Save operation completed successfully, and "Waiting For Approval" status now appears in the list. Results count increased from 12 to 13.
                </div>
            </div>
        </div>
    </div>

    <!-- Phase 2 Test Cases -->
    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 040 - Verify All Required Fields Validation</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Click on the "+ Status" button</li>
                    <li class="step-item">2. Leave all fields empty (Status name, Font Color, Background Color)</li>
                    <li class="step-item">3. Click Save button</li>
                    <li class="step-item">4. Verify validation errors appear for required fields</li>
                    <li class="step-item">5. Verify dialog remains open</li>
                    <li class="step-item">6. Verify status is not saved to the list</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Validation error: "The status field is required."</li>
                    <li class="step-item">Validation error: "The font color field is required."</li>
                    <li class="step-item">Validation error: "The background color field is required."</li>
                    <li class="step-item">Modal should remain open</li>
                    <li class="step-item">No new status should be added to the list</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Validation error "The status field is required." appeared when Save was clicked with empty Status field. Modal remained open and no status was saved to the list. Note: Only status field validation was observed during testing.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 041 - Verify Status Name Field Only Validation</div>
            <div>
                <span class="status failed">Failed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Click on the "+ Status" button</li>
                    <li class="step-item">2. Enter existing status name "Approved"</li>
                    <li class="step-item">3. Leave font color and background color with default values</li>
                    <li class="step-item">4. Click Save button</li>
                    <li class="step-item">5. Verify validation for duplicate status name</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Validation error should appear for duplicate status name</li>
                    <li class="step-item">Modal should remain open</li>
                    <li class="step-item">Duplicate status should not be created</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="error-details">
                    <strong>✗ FAILED:</strong> The system allowed creating a duplicate status name "Approved" instead of showing a validation error. The duplicate status was successfully created and added to the list, increasing the total count from 12 to 13. This indicates that duplicate status name validation is not implemented in the current system.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 042 - Verify Font Color Field Validation</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Click on the "+ Status" button</li>
                    <li class="step-item">2. Enter status name "Test Cancel"</li>
                    <li class="step-item">3. Fill color fields with default values</li>
                    <li class="step-item">4. Click Cancel button</li>
                    <li class="step-item">5. Verify modal closes without saving</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Modal should close when Cancel is clicked</li>
                    <li class="step-item">No new status should be saved</li>
                    <li class="step-item">Status count should remain unchanged</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Cancel button successfully closed the modal without saving any data. No new status "Test Cancel" was added to the list, and the total count remained unchanged at 13.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 043 - Verify Background Color Field Validation</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Select "Waiting For Approval" status from the list</li>
                    <li class="step-item">2. Click action button (⋮) and select "Delete"</li>
                    <li class="step-item">3. Verify confirmation dialog appears</li>
                    <li class="step-item">4. Verify dialog shows proper warning messages</li>
                    <li class="step-item">5. Verify dialog has correct buttons</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Confirmation dialog should appear</li>
                    <li class="step-item">Dialog should show "Are you sure?" message</li>
                    <li class="step-item">Dialog should show "This action cannot be undone." warning</li>
                    <li class="step-item">Dialog should have "Yes, delete it!" and "Cancel" buttons</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Confirmation dialog appeared correctly when Delete was clicked. Dialog displayed "Are you sure?" heading, "This action cannot be undone." warning message, and both "Yes, delete it!" and "Cancel" buttons as expected.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 044 - Delete Quote Status</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Select "Waiting For Approval" status from the list</li>
                    <li class="step-item">2. Click action button (⋮) and select "Delete"</li>
                    <li class="step-item">3. Verify confirmation dialog appears</li>
                    <li class="step-item">4. Click "Cancel" button</li>
                    <li class="step-item">5. Verify dialog closes and status remains in list</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Dialog should close when Cancel is clicked</li>
                    <li class="step-item">Status should remain in the list (not deleted)</li>
                    <li class="step-item">Total count should remain unchanged</li>
                    <li class="step-item">No success or error message should appear</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Cancel button successfully closed the confirmation dialog. "Waiting For Approval" status remained in the list and was not deleted. Total count remained unchanged at 13 results. No success or error messages appeared.
                </div>
            </div>
        </div>
    </div>

    <div class="test-case">
        <div class="test-header" onclick="toggleDetails(this)">
            <div class="test-title">TC 045 - Cancel Delete Quote Status</div>
            <div>
                <span class="status passed">Passed</span>
                <span class="expand-icon">▶</span>
            </div>
        </div>
        <div class="test-details">
            <div class="detail-section">
                <div class="detail-title">Test Steps</div>
                <ul class="step-list">
                    <li class="step-item">1. Select first "Approved" status (duplicate) from the list</li>
                    <li class="step-item">2. Click action button (⋮) and select "Delete"</li>
                    <li class="step-item">3. Verify confirmation dialog appears</li>
                    <li class="step-item">4. Click "Yes, delete it!" button</li>
                    <li class="step-item">5. Verify status is successfully deleted</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Expected Results</div>
                <ul class="step-list">
                    <li class="step-item">Status should be deleted from the list</li>
                    <li class="step-item">Total count should be reduced by 1</li>
                    <li class="step-item">Success message should appear</li>
                    <li class="step-item">Deleted status should no longer appear in the list</li>
                </ul>
            </div>
            <div class="detail-section">
                <div class="detail-title">Actual Results</div>
                <div class="success-details">
                    <strong>✓ PASSED:</strong> Delete operation completed successfully. One of the duplicate "Approved" statuses was removed from the list. Total count decreased from 13 to 12 results. The remaining "Approved" status moved to the bottom of the list, confirming the deletion was successful.
                </div>
            </div>
        </div>
    </div>

    <div class="summary">
        <h2>Issues Found</h2>
        <div class="error-details">
            <h3>TC 041 - Duplicate Status Name Validation Missing</h3>
            <p><strong>Issue:</strong> The system allows creating duplicate status names without validation.</p>
            <p><strong>Impact:</strong> Users can create multiple statuses with the same name, which could lead to confusion and data integrity issues.</p>
            <p><strong>Recommendation:</strong> Implement validation to prevent duplicate status names and display appropriate error message when attempted.</p>
        </div>

        <h2>Test Environment Information</h2>
        <ul>
            <li><strong>Application URL:</strong> https://cte-dev.iclick.nz/</li>
            <li><strong>Browser:</strong> Chrome (via Playwright)</li>
            <li><strong>Test Data:</strong> admin@email.com / Admin@123</li>
            <li><strong>Test Execution Time:</strong> July 8, 2025, 4:42 PM - 4:44 PM</li>
            <li><strong>Total Execution Duration:</strong> Approximately 2 minutes</li>
        </ul>

        <h2>Recommendations</h2>
        <ol>
            <li>Implement duplicate status name validation to prevent data integrity issues</li>
            <li>Consider adding comprehensive field validation for all color fields</li>
            <li>Add success/error message notifications for better user feedback</li>
            <li>Consider adding confirmation messages for successful operations</li>
        </ol>
    </div>

    <script>
        function toggleDetails(header) {
            const details = header.nextElementSibling;
            const testCase = header.parentElement;
            
            if (details.classList.contains('show')) {
                details.classList.remove('show');
                testCase.classList.remove('expanded');
            } else {
                details.classList.add('show');
                testCase.classList.add('expanded');
            }
        }

        // Auto-expand failed test cases
        document.addEventListener('DOMContentLoaded', function() {
            const failedTests = document.querySelectorAll('.status.failed');
            failedTests.forEach(status => {
                const header = status.closest('.test-header');
                toggleDetails(header);
            });
        });
    </script>
</body>
</html>
